import{a as U,o as q,A as E,ad as le,B as T,I as pe,H as y,G as he,h as e,C as ge,O as ve,ae as Q,J as C,d2 as fe}from"./entry.328b861b.js";import{a as me,u as M}from"./fetch.7103049b.js";import{u as we}from"./composables.618862be.js";import{u as be,t as r,N as _e}from"./useLanguage.d2d2312d.js";import{F as ye,C as xe,K as $e,T as ke,b as F,c as De,d as Ne,B as Se,e as Ae,G as Te,f as Le,g as je}from"./RenderSchema.758665a5.js";import{b as B}from"./index.d4f86f82.js";import{N as Be}from"./RenderData.1a6bae2b.js";import{o as _}from"./index.ad61f358.js";import{e as Ue,L as Ce,A as Me,l as qe,D as Ee,f as ze,a as ee,T as H,N as O,j as We,i as Pe}from"./Trash.f7f2ca5d.js";import{L as Ie,g as Re,U as Fe,N as p,P as G,b as He}from"./Upload.0169452e.js";import{X as ae,f as Oe,b as Ge,e as w,P as Je,C as Ve,N as P}from"./RenderFields.4cf147db.js";import{S as Ke}from"./Settings.9848080c.js";import{q as Ze,u as Xe,N as J,F as V}from"./FileText.6114aa05.js";import{N as i,b}from"./Icon.29c3922e.js";import{N as v}from"./text.28dac007.js";import{N as f}from"./Space.59a4ec5d.js";import{N as Ye}from"./RichEditor.e82d76d5.js";import{N as A}from"./Time.07060ce1.js";import{N as Qe}from"./Popconfirm.d94c8c87.js";import{N as K,a as ea}from"./Image.ee9b4ccc.js";import"./format-length.ad42f3fa.js";import"./vue.runtime.esm-bundler.6b4d84ea.js";import"./Scrollbar.ab988cec.js";import"./Scrollbar.0c5a84d0.js";import"./use-is-composing.b03ea0d7.js";import"./ColorPicker.73c99446.js";import"./Upload.c25d53d7.js";import"./Add.216a72f9.js";import"./use-houdini.a45afe2f.js";const aa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ta=le('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h10"></path><path d="M4 12l4 4"></path><path d="M4 12l4-4"></path><path d="M20 4v16"></path></g>',1),la=[ta],ra=U({name:"ArrowBarLeft",render:function(u,L){return q(),E("svg",aa,la)}}),sa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},na=le('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12H10"></path><path d="M20 12l-4 4"></path><path d="M20 12l-4-4"></path><path d="M4 4v16"></path></g>',1),ia=[na],oa=U({name:"ArrowBarRight",render:function(u,L){return q(),E("svg",sa,ia)}}),ua={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},da=T("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[T("path",{d:"M11 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-5"}),T("path",{d:"M10 14L20 4"}),T("path",{d:"M15 4h5v5"})],-1),ca=[da],pa=U({name:"ExternalLink",render:function(u,L){return q(),E("svg",ua,ca)}}),ha={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ga=T("path",{d:"M5 12h14",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),va=[ga],fa=U({name:"Minus",render:function(u,L){return q(),E("svg",ha,va)}}),ma={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},wa=T("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[T("circle",{cx:"10",cy:"10",r:"7"}),T("path",{d:"M21 21l-6-6"})],-1),ba=[wa],te=U({name:"Search",render:function(u,L){return q(),E("svg",ma,ba)}}),Ka=U({async setup(){const o=pe(),u=y("database"),L=he("Language");be({ar:{view_item:"\u0645\u064F\u0639\u0627\u064A\u0646\u0629 \u0627\u0644\u0639\u0646\u0635\u0631",new:"\u062C\u062F\u064A\u062F",deleted_at:"\u062D\u064F\u0630\u0641",created_at:"\u0623\u064F\u0636\u064A\u0641",updated_at:"\u0639\u064F\u062F\u0650\u0651\u0644",update:"\u062A\u062D\u062F\u064A\u062B",create:"\u0625\u0646\u0634\u0627\u0621",delete:"\u062D\u0630\u0641",move_to_trash:"\u0646\u0642\u0644 \u0644\u0633\u0644\u0629 \u0627\u0644\u0645\u0647\u0645\u0644\u0627\u062A",confirm_delete_permanently:"\u062D\u0630\u0641 \u0628\u0635\u0641\u0629 \u0646\u0647\u0627\u0626\u064A\u0629?",edit:"\u062A\u0639\u062F\u064A\u0644",published:"\u0627\u0644\u0645\u0646\u0634\u0648\u0631\u0629",trash:"\u0633\u0644\u0629 \u0627\u0644\u0645\u0647\u0645\u0644\u0627\u062A",id:"\u0627\u0644\u0645\u064F\u0639\u0631\u0641",actions:"\u0627\u0644\u0623\u0648\u0627\u0645\u0631",edit_schema:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0647\u064A\u0643\u0644",search:"\u0628\u062D\u062B",reset:"\u0625\u0641\u0631\u0627\u063A",search_conditions:{equal_to:"\u064A\u0633\u0627\u0648\u064A",not_equal_to:"\u0644\u0627 \u064A\u0633\u0627\u0648\u064A",greater_than:"\u0623\u0643\u0628\u0631 \u0645\u0646",greater_equal_to:"\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A",less_than:"\u0623\u0635\u063A\u0631 \u0645\u0646",less_equal_to:"\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0648 \u064A\u0633\u0627\u0648\u064A",contains:"\u064A\u062D\u062A\u0648\u064A",not_contain:"\u0644\u0627 \u064A\u062D\u062A\u0648\u064A"},fields:{text:"\u0646\u0635",short_text:"\u0646\u0635 \u0642\u0635\u064A\u0631",long_text:"\u0646\u0635 \u0637\u0648\u064A\u0644",editor:"\u0645\u062D\u0631\u0631 \u0646\u0635\u0648\u0635",number:"\u0631\u0642\u0645",password:"\u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631",link:"\u0631\u0627\u0628\u0637",email:"\u0628\u0631\u064A\u062F",upload:"\u0645\u0644\u062D\u0642",tags:"\u0648\u0633\u0648\u0645",date:"\u062A\u0627\u0631\u064A\u062E",toggle:"\u0633\u062D\u0628",list:"\u0642\u0627\u0626\u0645\u0629",group:"\u0645\u062C\u0645\u0648\u0639\u0629",table:"\u062C\u062F\u0648\u0644"}},en:{view_item:"View item",new:"New",deleted_at:"Deleted at",created_at:"Created at",updated_at:"Updated at",update:"Update",create:"Create",delete:"Delete",move_to_trash:"Move to trash",confirm_delete_permanently:"Delete Permanently?",edit:"Edit",published:"Published",trash:"Trash",id:"ID",actions:"Actions",edit_schema:"Edit Schema",search:"Search",reset:"Reset",search_conditions:{equal_to:"Equal to",not_equal_to:"Not Equal to",greater_than:"Greater than",greater_equal_to:"Greater/Equal than",less_than:"Less than",less_equal_to:"Less/Equal than",contains:"Contains",not_contain:"Doesn't Contains"},fields:{text:"Text",short_text:"Short Text",long_text:"Long Text",editor:"Rich Editor",number:"Number",password:"Password",email:"Email",link:"Link",upload:"Upload",tags:"Tags",date:"Date",toggle:"Toggle",list:"List",group:"Group",table:"Table"}}});const re=Q("RenderSchema"),se=Q("RenderFields"),ne=[{label:r("fields.text"),key:"input",icon:()=>e(i,()=>e(ye)),children:[{label:r("fields.short_text"),key:"text",icon:()=>e(i,()=>e(Ce))},{label:r("fields.long_text"),key:"textarea",icon:()=>e(i,()=>e(Me))},{label:r("fields.editor"),key:"editor",icon:()=>e(i,()=>e(xe))},{label:r("fields.number"),key:"number",icon:()=>e(i,()=>e(Ie))},{label:r("fields.password"),key:"password",icon:()=>e(i,()=>e($e))},{label:r("fields.email"),key:"email",icon:()=>e(i,()=>e(qe))},{label:r("fields.link"),key:"url",icon:()=>e(i,()=>e(Re))}]},{label:r("fields.upload"),key:"upload",icon:()=>e(i,()=>e(Fe))},{label:r("fields.tags"),key:"tags",icon:()=>e(i,()=>e(ke))},{label:r("fields.date"),key:"date",icon:()=>e(i,()=>e(F))},{label:r("fields.toggle"),key:"boolean",icon:()=>e(i,()=>e(De))},{label:r("fields.list"),key:"list",icon:()=>e(i,()=>e(Ne))},{label:r("fields.group"),key:"group",icon:()=>e(i,()=>e(Se))},{label:r("fields.table"),key:"table",icon:()=>e(i,()=>e(Ae))}];we({title:`${u.value.name} | ${u.value.tables.find(l=>l.slug===o.params.slug).name} Table`,link:[{rel:"icon",href:u.value.icon}]});const c=y("Loading",()=>({})),x=y("Window"),N=y(()=>null,"$Acyf37pyvm"),d=y(()=>[],"$j35VMHU3g5"),z=y(()=>[],"$eeNFjSEhLk"),ie=y("ShowSchemaModal",()=>!1),$=y(()=>!1,"$sNqM8U6bWw");c.value.TableData=!1,c.value.DrawerContent=!1,c.value.Drawer={};const m=y("User"),S=Ue(),I=y(()=>null,"$JSWHN9L5S0"),n=y("Drawer",()=>({show:!1,id:null,table:null,data:{}})),Z=async()=>{c.value.Drawer={...c.value.Drawer,[`${n.value.table}_${n.value.id}`]:!0},await M(`https://api.inicontent.com/${o.params.db_slug}/${n.value.table}/${n.value.id}`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},transform:l=>n.value.data=l.result,initialCache:!1},"$MEH2iydvsq"),c.value.Drawer={...c.value.Drawer,[`${n.value.table}_${n.value.id}`]:!1},n.value.show=!0},oe=async()=>{var l;(l=I.value)==null||l.validate(async a=>{if(a)S.error("The inputs are Invalid");else{c.value.DrawerContent=!0;const{data:t}=await M(`https://api.inicontent.com/${o.params.db_slug}/${n.value.table}/${n.value.id}!`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},method:"PUT",body:n.value.data,initialCache:!1},"$Mwf3MeleN4");if(t.value.result&&t.value.result.id)return S.success(t.value.message.en),c.value.DrawerContent=!1,n.value.show=!1,n.value.data={},D();S.error(t.value.message.en),c.value.DrawerContent=!1}})},ue=async()=>{var l;(l=I.value)==null||l.validate(async a=>{if(a)S.error("The inputs are Invalid");else{c.value.DrawerContent=!0;const{data:t}=await M(`https://api.inicontent.com/${o.params.db_slug}/${n.value.table}`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},method:"POST",body:n.value.data,initialCache:!1,transform:s=>(s.result&&(s.result=[].concat(s.result)[0]),s)},"$uOmeWChnAu");t.value.result&&t.value.result.id?(S.success(t.value.message.en),c.value.DrawerContent=!1,n.value.show=!1,j.value.result.unshift(t.value.result),n.value.data={}):S.error(t.value.message.en),c.value.DrawerContent=!1}})},de=y(()=>null,"$w0UAeI2Bmw"),W=y(()=>[],"$KApYSqYmgA"),k=ge({page:1,pageCount:1,showSizePicker:!0,pageSize:15,pageSizes:[15,30,60,100],prefix:({itemCount:l})=>l,onChange:async l=>(k.value.page=l,D()),onUpdatePageSize:async l=>(k.value.pageSize=l,D())}),{data:j,refresh:D}=await me(`TableData_${o.params.db_slug}-${o.params.slug}`,()=>{var l;return $fetch(`https://api.inicontent.com/${o.params.db_slug}/${o.params.slug}`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},onRequest:()=>c.value.TableData=!0,params:{_options:JSON.stringify({page:k.value.page,per_page:k.value.pageSize,show_deleted:$.value,columns:u.value.tables&&((l=u.value.tables.find(a=>a.slug===o.params.slug))==null?void 0:l.schema)?u.value.tables.find(a=>a.slug===o.params.slug).schema.map(a=>Te(a)).flat(1/0):[]}),_where:N.value?$.value?JSON.stringify(JSON.parse(N.value).push([["deleted_at",">","0"]])):N.value:$.value?JSON.stringify(["deleted_at",">","0"]):null}})},{transform:l=>(c.value.TableData=!1,l.options.total<l.options.per_page&&(k.value.showSizePicker=!1),k.value.pageCount=l.options.total_pages,k.value.itemCount=l.options.total,l)}),X=async l=>{c.value.TableData=!0,await M(`https://api.inicontent.com/${o.params.db_slug}/${o.params.slug}/${l}`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},method:"DELETE",initialCache:!1},"$KblyFULeUb"),j.value.result=j.value.result.filter(a=>a.id!==l),k.value.itemCount--,S.success("Deleted Successfully"),c.value.TableData=!1},R=(l,a)=>{switch(a.type){case"table":return l&&(Array.isArray(l)&&l.filter(t=>t.id).length>0||l.id)?!a.hasOwnProperty("single")||a.single?x.value.width>=700?e(p,{onClick:()=>(n.value.id=[].concat(l)[0].id,n.value.table=a.name,n.value.data={},Z()),loading:c.value.Drawer[`${a.name}_${[].concat(l)[0].id}`],size:"small",round:!0},a.image?{icon:()=>e(i,()=>e(P,{style:{width:"18px",height:"18px"},round:!0,src:[].concat(_.get(l,a.image)).map(t=>t&&t.includes("cdn.inicontent")&&["png","jpg","jpeg","ico","webp","svg","gif"].includes(t.split(".").pop())?`${t}?fit=18`:t)[0]})),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(t=>_.get(l,t)).join(" "))}:{icon:()=>e(i,()=>e("span",{style:{padding:"0 5px"}},a.name.charAt(0).toUpperCase())),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(t=>_.get(l,t)).join(" "))}):e(C,{to:`${a.name}/${[].concat(l)[0].id}`},()=>e(p,{size:"small",round:!0},a.image?{icon:()=>e(i,()=>e(P,{style:{width:"18px",height:"18px"},round:!0,src:[].concat(_.get(l,a.image)).map(t=>t&&t.includes("cdn.inicontent")&&["png","jpg","jpeg","ico","webp","svg","gif"].includes(t.split(".").pop())?`${t}?fit=18`:t)[0]})),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(t=>_.get(l,t)).join(" "))}:{icon:()=>e(i,()=>e("span",{style:{padding:"0 5px"}},a.name.charAt(0).toUpperCase())),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(t=>_.get(l,t)).join(" "))})):[].concat(l).map(t=>x.value.width>=700?e(p,{onClick:()=>(n.value.id=t.id,n.value.table=a.name,n.value.data={},Z()),loading:c.value.Drawer[`${a.name}_${t.id}`],size:"small",round:!0},a.image?{icon:()=>e(i,()=>e(P,{style:{width:"18px",height:"18px"},round:!0,src:[].concat(_.get(t,a.image)).map(s=>s&&s.includes("cdn.inicontent")&&["png","jpg","jpeg","ico","webp","svg","gif"].includes(s.split(".").pop())?`${s}?fit=18`:s)[0]})),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(s=>_.get(t,s)).join(" "))}:{icon:()=>e(i,()=>e("span",{style:{padding:"0 5px"}},a.name.charAt(0).toUpperCase())),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(s=>_.get(t,s)).join(" "))}):e(C,{to:`${a.name}/${t.id}`},()=>e(p,{size:"small",round:!0},a.image?{icon:()=>e(i,()=>e(P,{style:{width:"18px",height:"18px"},round:!0,src:[].concat(_.get(t,a.image)).map(s=>s&&s.includes("cdn.inicontent")&&["png","jpg","jpeg","ico","webp","svg","gif"].includes(s.split(".").pop())?`${s}?fit=18`:s)[0]})),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(s=>_.get(t,s)).join(" "))}:{icon:()=>e(i,()=>e("span",{style:{padding:"0 5px"}},a.name.charAt(0).toUpperCase())),default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>a.label.map(s=>_.get(t,s)).join(" "))}))):e(v,{depth:3},()=>"--");case"email":return l?e(J,{href:`mailto:${l}`,target:"_blank"},{default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>l)}):e(v,{depth:3},()=>"--");case"password":return l?e(w,{tooltip:!1,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>Array.from(Array(l.length),()=>"\u2022")):e(v,{depth:3},()=>"--");case"date":return l?e(A,{time:l,unix:!0}):e(v,{depth:3},()=>"--");case"boolean":return e(Be,{color:l?"green":"red",borderRadius:50,size:18},()=>e(i,{size:16},()=>e(l?Ve:ae)));case"url":return l?e(J,{href:l,target:"_blank"},{default:()=>e(w,{tooltip:!0,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>l)}):e(v,{depth:3},()=>"--");case"list":case"tags":return l?e(f,()=>[].concat(l).map(t=>e(O,{bordered:!1},{default:()=>e(w,{tooltip:!1,style:{maxWidth:(t.name&&t.name.length>10?t.name.length*15:150)+"px"}},()=>t)}))):e(v,{depth:3},()=>"--");case"editor":return l?e(b,{style:{maxHeight:"240px",maxWidth:"300px"},trigger:"click",scrollable:!0},{trigger:()=>e(p,{circle:!0},{default:()=>e(v,{depth:3},{default:()=>"..."})}),default:()=>e("div",{innerHTML:l})}):e(v,{depth:3},()=>"--");case"date":return l?e(A,{time:l,unix:!0,type:"relative"}):e(v,{depth:3},()=>"--");case"upload":return l?[].concat(l).length===1?[].concat(l).map(t=>["png","jpg","jpeg","ico","webp","svg","gif"].includes(t.split(".").pop())?e(K,{src:t&&t.includes("cdn.inicontent")?`${t}?fit=32`:t,previewSrc:t,width:32}):e(i,()=>e(V))):e(ea,()=>e(f,{align:"center"},()=>[].concat(l).length>3?[...[].concat(l).slice(0,3).map(t=>["png","jpg","jpeg","ico","webp","svg","gif"].includes(t.split(".").pop())?e(K,{src:t&&t.includes("cdn.inicontent")?`${t}?fit=32`:t,previewSrc:t,width:32}):e(i,()=>e(V))),`+${[].concat(l).length-3}`]:[].concat(l).map(t=>["png","jpg","jpeg","ico","webp","svg","gif"].includes(t.split(".").pop())?e(K,{src:t&&t.includes("cdn.inicontent")?`${t}?fit=32`:t,previewSrc:t,width:32}):e(i,()=>e(V))))):e(v,{depth:3},()=>"--");case"group":return a.duplicatable?l&&l.length>0?e(b,{trigger:"click",scrollable:!0,style:{maxHeight:"240px"}},{trigger:()=>e(p,{circle:!0},{default:()=>"[...]"}),default:()=>e(We,{accordion:!0,arrowPlacement:"right"},()=>[].concat(l).map((t,s)=>e(Pe,{title:`${a.name} ${s+1}`},()=>e(f,{vertical:!0},()=>a.children.map(h=>e(f,{align:"center"},()=>[e("strong",`${h.name}:`),R(_.get(t,h.name.toLowerCase().replace(/ /g,"_").replace(/[^\[a-zA-Zء-ي]-_+/g,"")),h)]))))))}):e(p,{circle:!0},{default:()=>e(v,{depth:3},{default:()=>"[--]"})}):e(b,{trigger:"click"},{trigger:()=>e(p,{circle:!0},{default:()=>"{...}"}),default:()=>e(f,{vertical:!0},()=>a.children.map(t=>e(f,{align:"center",inline:!0},()=>[e("strong",`${t.name}:`),R(_.get(l,t.name.toLowerCase().replace(/ /g,"_").replace(/[^\[a-zA-Zء-ي]-_+/g,"")),t)])))});case"role":return l?e(O,{round:!0,bordered:!1},{default:()=>e(w,{tooltip:!1,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>l.charAt(0).toUpperCase()+l.slice(1).replaceAll("_"," ")),icon:()=>e("span",{style:{padding:"0 5px"}},l.charAt(0).toUpperCase())}):e(v,{depth:3},()=>"--");default:return l?e(w,{tooltip:!1,style:{maxWidth:(a.name&&a.name.length>10?a.name.length*15:150)+"px"}},()=>l):e(v,{depth:3},()=>"--")}},Y=()=>{var l;return[{type:"selection",fixed:"left",options:[{label:"Delete",key:"delete",disabled:W.value.length===0,icon:()=>e(i,()=>e(H)),onSelect:async()=>{c.value.TableData=!0,await M(`https://api.inicontent.com/${o.params.db_slug}/${o.params.slug}`,{headers:{Authorization:"Basic "+B.Buffer.from(`${m.value.username}:${m.value.password}`).toString("base64")},method:"DELETE",body:W.value,initialCache:!1},"$nU5AHb877A"),S.success("Deleted Successfully"),await D()}}]},{title:r("id"),width:100,key:"id",render:a=>e(b,{},{trigger:()=>e(O,{onClick:()=>fe(`${o.params.slug}/${a.id}`),bordered:!1,round:!0,style:"cursor: pointer"},()=>e(w,{tooltip:!1,style:"max-width:50px"},()=>a.id)),default:()=>r("view_item")})},...(u.value.tables&&((l=u.value.tables.find(a=>a.slug===o.params.slug))==null?void 0:l.schema)?u.value.tables.find(a=>a.slug===o.params.slug).schema:[]).map(a=>{const t=a.name.toLowerCase().replace(/ /g,"_").replace(/[^\[a-zA-Zء-ي]-_+/g,"");return{title:()=>e(f,{align:"center"},()=>{var s,h;return[(h=(s=ne.flatMap(g=>g.children?[{label:g.label,key:g.key,icon:g.icon},...g.children]:g).find(g=>g.key===a.type))==null?void 0:s.icon())!=null?h:e(i,()=>e(je)),a.name.charAt(0).toUpperCase()+a.name.slice(1).replaceAll("_"," ")]}),width:a.name&&a.name.length>10?a.name.length*15:200,key:t,render:s=>R(s[t],a)}}),{title:()=>e(f,()=>[e(i,()=>e(F)),r("created_at")]),width:150,key:"created_at",render:a=>a.created_at?e(b,{},{trigger:()=>e(A,{time:a.created_at,unix:!0,type:"relative"}),default:()=>e(A,{time:a.created_at,unix:!0})}):e(v,{depth:3},()=>"--")},{title:()=>e(f,()=>[e(i,()=>e(F)),r("updated_at")]),width:150,key:"updated_at",render:a=>a.updated_at?e(b,{},{trigger:()=>e(A,{time:a.updated_at,unix:!0,type:"relative"}),default:()=>e(A,{time:a.updated_at,unix:!0})}):e(v,{depth:3},()=>"--")},$.value?{title:r("deleted_at"),width:150,key:"deleted_at",render:a=>a.deleted_at?e(b,{},{trigger:()=>e(A,{time:a.deleted_at,unix:!0,type:"relative"}),default:()=>e(A,{time:a.deleted_at,unix:!0})}):e(v,{depth:3},()=>"--")}:null,{title:r("actions"),fixed:x.value.width>400?"right":!1,align:"center",width:150,key:"actions",render(a){return e(f,{justify:"center"},()=>[e(C,{to:`${o.params.slug}/${a.id}/edit`},()=>e(b,{},{trigger:()=>e(p,{secondary:!0,circle:!0,type:"info"},{icon:()=>e(i,()=>e(Je))}),default:()=>r("edit")})),$.value?e(Qe,{onPositiveClick:()=>X(a.id)},{trigger:()=>e(b,{},{trigger:()=>e(p,{strong:!0,secondary:!0,circle:!0,type:"error"},{icon:()=>e(i,()=>e(H))}),default:()=>r("delete")}),default:()=>r("confirm_delete")}):e(b,{},{trigger:()=>e(p,{strong:!0,secondary:!0,circle:!0,type:"error",onClick:()=>X(a.id)},{icon:()=>e(i,()=>e(H))}),default:()=>r("move_to_trash")})])}}].filter(a=>a!==null)};return ve($,()=>(k.value.page=1,D())),()=>{var l;return[m.value&&m.value.role==="admin"?e(re,{table:o.params.slug}):null,x.value.width>=700?e(Ze,{show:n.value.show,"on-update:show":a=>n.value.show=a,width:x.value.width<700?window.screen.width:(l=n.value.width)!=null?l:251,"on-update:width":a=>n.value.width=a,resizable:!0,placement:L.value==="ar"?"left":"right"},()=>e(Xe,{closable:!0,nativeScrollbar:!1},{header:()=>n.value.id?["Edit ",e(C,{to:`${n.value.table}/${n.value.id}/edit`},()=>e(v,{type:"primary"},()=>[n.value.table.charAt(0).toUpperCase()+n.value.table.slice(1).replaceAll("_"," "),e(i,()=>e(pa))]))]:`${r("new")} ${n.value.table.charAt(0).toUpperCase()+n.value.table.slice(1).replaceAll("_"," ")}`,footer:()=>e(f,{style:{width:"100%"},justify:x.value.width>=700?"space-between":"end"},()=>[x.value.width>=700?e(p,{round:!0,secondary:!0,type:"info",onClick:()=>n.value.width=n.value.width>=window.screen.width/2?251:window.screen.width-2},{icon:()=>e(i,()=>e(n.value.width>=window.screen.width/2?oa:ra))}):null,e(p,{round:!0,secondary:!0,type:"primary",onClick:n.value.id?oe:ue,loading:c.value.DrawerContent},{icon:()=>e(i,()=>e(Ee)),default:()=>n.value.id?r("update"):r("create")})]),default:()=>e(ze,{ref:I,model:n.value.data},()=>e(se,{modelValue:n.value.data,"onUpdate:modelValue":a=>n.value.data=a,schema:u.value.tables.find(a=>a.slug===n.value.table).schema}))})):null,u.value?e(_e,{style:{background:"none"},contentStyle:"padding: 0",bordered:!1},{header:()=>e(f,()=>{var a;return[x.value.width<700?u.value.tables.find(t=>t.slug===o.params.slug).name:`${u.value.name} - ${(a=u.value.tables.find(t=>t.slug===o.params.slug))==null?void 0:a.name}`,e(p,{text:!0,type:$.value?"default":"primary",onClick:()=>$.value=!1},()=>r("published"))," | ",e(p,{text:!0,type:$.value?"primary":"default",onClick:()=>$.value=!0},()=>r("trash"))]}),"header-extra":()=>e(f,()=>{var a;return[e(b,{disabled:!((a=j.value)!=null&&a.result)||!u.value.tables||!u.value.tables.find(t=>t.slug===o.params.slug).schema,style:{maxHeight:"240px",width:x.value.width<700?"300px":"500px"},placement:"bottom-end",trigger:"click",scrollable:!0},{trigger:()=>e(b,{},{trigger:()=>{var t;return e(p,{disabled:!((t=j.value)!=null&&t.result)||!u.value.tables||!u.value.tables.find(s=>s.slug===o.params.slug).schema,onClick:()=>{(!d.value||d.value.length===0)&&(d.value=[[null,"=",null]])}},{icon:()=>e(i,()=>e(te))})},default:()=>r("search")}),footer:()=>e(f,{justify:"space-between"},()=>[e(f,{},()=>[d.value&&d.value.length>1?e(p,{onClick:()=>d.value.splice(-1)},{icon:()=>e(i,()=>e(fa))}):null,e(p,{onClick:()=>d.value.push([null,"=",null])},{icon:()=>e(i,()=>e(G))})]),e(f,{},()=>[e(p,{disabled:N.value===null,loading:c.value.TableData,onClick:()=>(d.value=[[null,"=",null]],N.value=null,D())},{icon:()=>e(i,()=>e(ae)),default:()=>r("reset")}),e(p,{loading:c.value.TableData,onClick:()=>(N.value=d.value&&d.value.length>0?JSON.stringify(d.value):null,D())},{icon:()=>e(i,()=>e(te)),default:()=>r("search")})])]),default:()=>e(f,{itemStyle:{width:"100%"}},()=>d.value.map((t,s)=>e(Ye,()=>[e(ee,{tag:!0,filterable:!0,value:d.value[s][0],onUpdateValue:(h,g)=>(z.value[s]=g.ty,d.value[s][0]=h),options:u.value.tables&&u.value.tables.find(h=>h.slug===o.params.slug).schema?u.value.tables.find(h=>h.slug===o.params.slug).schema.map((h,g,ce)=>Le(ce,h)).flat(1/0):[],style:{width:"33.33%"}}),e(ee,{filterable:!0,defaultValue:"=",value:d.value[s][1],onUpdateValue:h=>d.value[s][1]=h,options:z.value[s]?["date","number"].includes(z.value[s])?[{label:r("search_conditions.equal_to"),value:"="},{label:r("search_conditions.not_equal_to"),value:"!"},{label:r("search_conditions.greater_than"),value:">"},{label:r("search_conditions.greater_equal_to"),value:">="},{label:r("search_conditions.less_than"),value:"<"},{label:r("search_conditions.less_equal_to"),value:"<="},{label:r("search_conditions.contains"),value:"like"},{label:r("search_conditions.not_contain"),value:"not like"}]:[{label:r("search_conditions.equal_to"),value:"="},{label:r("search_conditions.not_equal_to"),value:"!"},{label:r("search_conditions.contains"),value:"like"},{label:r("search_conditions.not_contain"),value:"not like"}]:[{label:r("search_conditions.equal_to"),value:"="},{label:r("search_conditions.not_equal_to"),value:"!"},{label:r("search_conditions.contains"),value:"like"},{label:r("search_conditions.not_contain"),value:"not like"}],style:{width:"33.33%"}}),(()=>{var h;switch((h=z.value[s])!=null?h:null){case"date":return e(Oe,{value:d.value[s][2]?d.value[s][2]*1e3:Date.now(),onConfirm:g=>(d.value[s][2]=g/1e3,N.value=d.value&&d.value.length>0?JSON.stringify(d.value):null,D()),type:"datetime"});default:return e(He,{onKeyup:g=>g.code==="Enter"&&(N.value=d.value&&d.value.length>0?JSON.stringify(d.value):null,D()),value:d.value[s][2],onUpdateValue:g=>d.value[s][2]=g,style:{width:"33.33%"}})}})()])))}),x.value.width>=700?e(J,{href:`${o.params.slug}/new`,onClick:t=>t.preventDefault()},()=>e(b,{},{trigger:()=>e(p,{disabled:!u.value.tables||!u.value.tables.find(t=>t.slug===o.params.slug).schema,onClick:()=>(n.value.table=o.params.slug,n.value.id=null,n.value.data={},n.value.show=!0)},{icon:()=>e(i,()=>e(G))}),default:()=>r("add_new")})):e(C,{to:!u.value.tables||!u.value.tables.find(t=>t.slug===o.params.slug).schema?null:`${o.params.slug}/new`},()=>e(b,{},{trigger:()=>e(p,{disabled:!u.value.tables||!u.value.tables.find(t=>t.slug===o.params.slug).schema},{icon:()=>e(i,()=>e(G))}),default:()=>r("add_new")})),m.value&&m.value.role==="admin"?e(b,{},{trigger:()=>e(p,{onClick:()=>ie.value=!0},{icon:()=>e(i,()=>e(Ke))}),default:()=>r("edit_schema")}):null]}),default:()=>{var a;return e(Ge,{scrollX:Y().reduce((t,s)=>t+s.width,1e3),id:"DataTable",remote:!0,ref:de,columns:Y(),data:((a=j.value)==null?void 0:a.result)||[],loading:c.value.TableData,pagination:k.value,rowKey:t=>t.id,checkedRowKeys:W.value,"on-update:checked-row-keys":t=>W.value=t,maxHeight:350})}}):null]}}});export{Ka as default};

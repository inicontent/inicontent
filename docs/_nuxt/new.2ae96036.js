import{u as $,t as l,N as C}from"./useLanguage.253ae023.js";import{a as N,H as p,I as R,C as c,h as a,d2 as T}from"./entry.965cbfb6.js";import{u as w}from"./composables.afeb471a.js";import{u as A}from"./fetch.eef88911.js";import{b as S}from"./index.d4f86f82.js";import"./RenderData.2b7cc39b.js";import{S as v}from"./Send.c7d9d9d3.js";import{e as U,R as k}from"./RenderFields.dc20bf3f.js";import{e as B,f as F}from"./Trash.b33dcf75.js";import{N as g}from"./Space.f818dfb9.js";import{b as I,N as h}from"./Icon.f74efb11.js";import{N as b}from"./Upload.38b41102.js";import"./index.32cff159.js";import"./format-length.ad42f3fa.js";import"./ColorPicker.1807d23f.js";import"./Time.9226a68e.js";import"./FileText.cd6a6f0c.js";import"./Scrollbar.f1d32ba1.js";import"./use-is-composing.b2f0b09a.js";import"./Scrollbar.bdc26b9c.js";import"./text.4d5a7e92.js";import"./use-houdini.66c23f06.js";import"./Image.503ecb01.js";import"./RenderSchema.0fe72e56.js";import"./vue.runtime.esm-bundler.7083aaa5.js";import"./RichEditor.cdf03c68.js";import"./Upload.0a12a685.js";import"./Add.59e5c432.js";const ue=N({async setup(){$({ar:{new:"\u062C\u062F\u064A\u062F",publish:"\u0646\u0634\u0631"},en:{new:"New",publish:"Publish"}});const t=p("Loading",()=>({}));t.value.CREATE=!1;const r=R(),s=p("database"),y=s.value.tables.find(e=>e.slug===r.params.slug).schema,d=p("User"),m=B(),i=c({}),f=c(),n=async()=>{var e;(e=f.value)==null||e.validate(async E=>{if(E)m.error("The inputs are Invalid");else{t.value.CREATE=!0;const{data:o}=await A(`https://api.inicontent.com/${r.params.db_slug}/${r.params.slug}`,{headers:{Authorization:"Basic "+S.Buffer.from(`${d.value.username}:${d.value.password}`).toString("base64")},method:"POST",body:i.value,initialCache:!1,transform:u=>(u.result&&(u.result=[].concat(u.result)[0]),u)},"$XJVnQ8UQ8b");if(o.value.result&&o.value.result.id)return m.success(o.value.message.en),t.value.CREATE=!1,T(`/${r.params.db_slug}/tables/${r.params.slug}/${o.value.result.id}`);m.error(o.value.message.en),t.value.CREATE=!1}})};return w({title:`${s.value.name} | ${l("new")} ${s.value.tables.find(e=>e.slug===r.params.slug).name}`,link:[{rel:"icon",href:s.value.icon}]}),()=>a(C,{title:`${l("new")} item`,style:"height: fit-content",onKeyup:e=>e.preventDefault()&&e.code==="s"&&(e.ctrlKey||e.metaKey)?n():null},{header:()=>a(U,()=>`${l("new")} ${s.value.tables.find(e=>e.slug===r.params.slug).name}`),"header-extra":()=>a(g,{},()=>[a(I,{},{trigger:()=>a(b,{secondary:!0,circle:!0,type:"primary",onClick:n,loading:t.value.CREATE},{icon:()=>a(h,()=>a(v))}),default:()=>l("publish")})]),action:()=>a(g,{justify:"end"},()=>[a(b,{round:!0,secondary:!0,type:"primary",onClick:n,loading:t.value.CREATE},{icon:()=>a(h,()=>a(v)),default:()=>l("publish")})]),default:()=>a(F,{model:i.value,ref:f},()=>a(k,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,schema:y}))})}});export{ue as default};

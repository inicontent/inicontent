import{u as $,t as l,N as C}from"./useLanguage.d2d2312d.js";import{a as N,H as p,I as R,C as c,h as a,d2 as T}from"./entry.328b861b.js";import{u as w}from"./composables.618862be.js";import{u as A}from"./fetch.7103049b.js";import{b as S}from"./index.d4f86f82.js";import"./RenderData.1a6bae2b.js";import{S as v}from"./Send.fa62402a.js";import{e as U,R as k}from"./RenderFields.4cf147db.js";import{e as B,f as F}from"./Trash.f7f2ca5d.js";import{N as g}from"./Space.59a4ec5d.js";import{b as I,N as h}from"./Icon.29c3922e.js";import{N as b}from"./Upload.0169452e.js";import"./index.ad61f358.js";import"./format-length.ad42f3fa.js";import"./ColorPicker.73c99446.js";import"./Time.07060ce1.js";import"./FileText.6114aa05.js";import"./Scrollbar.0c5a84d0.js";import"./use-is-composing.b03ea0d7.js";import"./Scrollbar.ab988cec.js";import"./text.28dac007.js";import"./use-houdini.a45afe2f.js";import"./Image.ee9b4ccc.js";import"./RenderSchema.758665a5.js";import"./vue.runtime.esm-bundler.6b4d84ea.js";import"./RichEditor.e82d76d5.js";import"./Upload.c25d53d7.js";import"./Add.216a72f9.js";const ue=N({async setup(){$({ar:{new:"\u062C\u062F\u064A\u062F",publish:"\u0646\u0634\u0631"},en:{new:"New",publish:"Publish"}});const t=p("Loading",()=>({}));t.value.CREATE=!1;const r=R(),s=p("database"),y=s.value.tables.find(e=>e.slug===r.params.slug).schema,d=p("User"),m=B(),i=c({}),f=c(),n=async()=>{var e;(e=f.value)==null||e.validate(async E=>{if(E)m.error("The inputs are Invalid");else{t.value.CREATE=!0;const{data:o}=await A(`https://api.inicontent.com/${r.params.db_slug}/${r.params.slug}`,{headers:{Authorization:"Basic "+S.Buffer.from(`${d.value.username}:${d.value.password}`).toString("base64")},method:"POST",body:i.value,initialCache:!1,transform:u=>(u.result&&(u.result=[].concat(u.result)[0]),u)},"$XJVnQ8UQ8b");if(o.value.result&&o.value.result.id)return m.success(o.value.message.en),t.value.CREATE=!1,T(`/${r.params.db_slug}/tables/${r.params.slug}/${o.value.result.id}`);m.error(o.value.message.en),t.value.CREATE=!1}})};return w({title:`${s.value.name} | ${l("new")} ${s.value.tables.find(e=>e.slug===r.params.slug).name}`,link:[{rel:"icon",href:s.value.icon}]}),()=>a(C,{title:`${l("new")} item`,style:"height: fit-content",onKeyup:e=>e.preventDefault()&&e.code==="s"&&(e.ctrlKey||e.metaKey)?n():null},{header:()=>a(U,()=>`${l("new")} ${s.value.tables.find(e=>e.slug===r.params.slug).name}`),"header-extra":()=>a(g,{},()=>[a(I,{},{trigger:()=>a(b,{secondary:!0,circle:!0,type:"primary",onClick:n,loading:t.value.CREATE},{icon:()=>a(h,()=>a(v))}),default:()=>l("publish")})]),action:()=>a(g,{justify:"end"},()=>[a(b,{round:!0,secondary:!0,type:"primary",onClick:n,loading:t.value.CREATE},{icon:()=>a(h,()=>a(v)),default:()=>l("publish")})]),default:()=>a(F,{model:i.value,ref:f},()=>a(k,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,schema:y}))})}});export{ue as default};

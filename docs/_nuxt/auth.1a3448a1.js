import{u as k,t as m,N as x}from"./useLanguage.d2d2312d.js";import{a as q,H as p,I as V,d1 as O,C as v,h as a,d2 as d}from"./entry.328b861b.js";import{u as R}from"./composables.618862be.js";import{u as y}from"./fetch.7103049b.js";import"./RenderData.1a6bae2b.js";import{N as I,a as b}from"./Tabs.34e108e5.js";import{R as N}from"./RenderFields.4cf147db.js";import{e as D,f as T}from"./Trash.f7f2ca5d.js";import{N as w}from"./Upload.0169452e.js";import{N as H}from"./Scrollbar.ab988cec.js";import"./Space.59a4ec5d.js";import"./index.ad61f358.js";import"./format-length.ad42f3fa.js";import"./ColorPicker.73c99446.js";import"./Time.07060ce1.js";import"./FileText.6114aa05.js";import"./Icon.29c3922e.js";import"./Scrollbar.0c5a84d0.js";import"./use-is-composing.b03ea0d7.js";import"./text.28dac007.js";import"./use-houdini.a45afe2f.js";import"./Image.ee9b4ccc.js";import"./RenderSchema.758665a5.js";import"./index.d4f86f82.js";import"./vue.runtime.esm-bundler.6b4d84ea.js";import"./RichEditor.e82d76d5.js";import"./Upload.c25d53d7.js";import"./Add.216a72f9.js";import"./throttle.37ad0e3c.js";const ve=q({async setup(){var h;k({ar:{signin:"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",signup:"\u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628"},en:{signin:"Sign in",signup:"Sign up"}});const i=p("Loading",()=>({}));i.value.Signin=!1,i.value.Signup=!1;const C=V(),s=D(),r=p("database"),l=O("User"),c=p("User"),f=v(null),n=v({username:"",password:""}),S=v(),o=p(()=>({}),"$0PFgXwZ7NW"),F=[{name:"Username",type:"text",required:!0},{name:"Password",type:"password",required:!0}],P=(h=r.value.tables.find(t=>t.slug==="user"))!=null&&h.schema?r.value.tables.find(t=>t.slug==="user").schema:[{name:"Username",type:"text",required:!0},{name:"Email",type:"email",required:!0},{name:"Password",type:"password",required:!0}],U=async t=>{var u;t.preventDefault(),(u=S.value)==null||u.validate(async g=>{if(g)s.error("The inputs are Invalid");else if(i.value.Signup!==!0)if(i.value.Signup=!0,l.value&&l.value.subscriptionID){const{data:e}=await y(`https://api.inicontent.com/${r.value.slug}/auth/signup`,{method:"POST",body:o.value,initialCache:!1},"$SeJO7CXk4v");e.value.result&&e.value.result.id?(l.value=n.value,c.value=e.value.result,s.success(e.value.message.en),d(`/${r.value.slug}`)):s.error(e.value.message.en),i.value.Signup=!1}else s.error("Please pick a plan first"),d("/")})},$=async t=>{var u;t.preventDefault(),(u=f.value)==null||u.validate(async g=>{if(g)s.error("The inputs are Invalid");else if(i.value.Signin!==!0){i.value.Signin=!0;const{data:e}=await y(`https://api.inicontent.com/${r.value.slug}/auth/login`,{method:"POST",body:n.value,initialCache:!1},"$3uPyOXVzO8");e.value.result&&e.value.result.id?(l.value=n.value,c.value=e.value.result,s.success(e.value.message.en),d(`/${r.value.slug}`)):s.error(e.value.message.en),i.value.Signin=!1}})};return R({title:`${r.value.name} | Authentication`,link:[{rel:"icon",href:r.value.icon}]}),()=>a(x,{hoverable:!0,style:{maxWidth:"300px"}},()=>{var t;return a(I,{defaultValue:(t=C.query.tab)!=null?t:"signin",size:"large",animated:!0},()=>[a(b,{name:"signin",tab:m("signin")},()=>[a(T,{ref:f,model:n.value,onSubmit:$},()=>[a(N,{modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,schema:F}),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signin},()=>m("signin"))])]),a(b,{name:"signup",tab:m("signup")},()=>[a(T,{ref:S,model:o.value,onSubmit:U},()=>[a(H,{style:{maxHeight:"320px"}},()=>a(N,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,schema:P})),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signup},()=>m("signup"))])])])})}});export{ve as default};

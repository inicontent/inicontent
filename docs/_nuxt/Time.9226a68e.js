import{r as S,t as d,m as E,k as I,e as Y,a as Z,p,o as C}from"./FileText.cd6a6f0c.js";import{u as H}from"./Icon.f74efb11.js";import{M as $,a as j,b as T,af as k,h as q}from"./entry.965cbfb6.js";function B(r,n){S(2,arguments);var t=d(r),l=d(n),i=t.getTime()-l.getTime();return i<0?-1:i>0?1:i}function P(r){return E({},r)}var y=1e3*60,M=60*24,O=M*30,_=M*365;function V(r,n,t){var l,i,f;S(2,arguments);var m=Y(),o=(l=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:m.locale)!==null&&l!==void 0?l:$;if(!o.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var x=B(r,n);if(isNaN(x))throw new RangeError("Invalid time value");var e=E(P(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:x}),s,v;x>0?(s=d(n),v=d(r)):(s=d(r),v=d(n));var c=String((f=t==null?void 0:t.roundingMethod)!==null&&f!==void 0?f:"round"),u;if(c==="floor")u=Math.floor;else if(c==="ceil")u=Math.ceil;else if(c==="round")u=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var N=v.getTime()-s.getTime(),g=N/y,b=I(v)-I(s),h=(N-b)/y,R=t==null?void 0:t.unit,a;if(R?a=String(R):g<1?a="second":g<60?a="minute":g<M?a="hour":h<O?a="day":h<_?a="month":a="year",a==="second"){var L=u(N/1e3);return o.formatDistance("xSeconds",L,e)}else if(a==="minute"){var U=u(g);return o.formatDistance("xMinutes",U,e)}else if(a==="hour"){var z=u(g/60);return o.formatDistance("xHours",z,e)}else if(a==="day"){var F=u(h/M);return o.formatDistance("xDays",F,e)}else if(a==="month"){var D=u(h/O);return D===12&&R!=="month"?o.formatDistance("xYears",1,e):o.formatDistance("xMonths",D,e)}else if(a==="year"){var A=u(h/_);return o.formatDistance("xYears",A,e)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function w(r){S(1,arguments);var n=Z(r);return d(n*1e3)}const G={time:{type:[Number,Date],default:void 0},type:{type:String,default:"datetime"},to:{type:[Number,Date],default:void 0},unix:Boolean,format:String,text:Boolean,timeZone:String},W=j({name:"Time",props:G,setup(r){const n=Date.now(),{localeRef:t,dateLocaleRef:l}=H("Time"),i=T(()=>{const{timeZone:e}=r;return e?(s,v,c)=>p(s,e,v,c):C}),f=T(()=>({locale:l.value.locale})),m=T(()=>{const{time:e}=r;return r.unix?e===void 0?n:w(typeof e=="number"?e:e.valueOf()):e!=null?e:n}),o=T(()=>{const{to:e}=r;return r.unix?e===void 0?n:w(typeof e=="number"?e:e.valueOf()):e!=null?e:n});return{renderedTime:T(()=>r.format?i.value(m.value,r.format,f.value):r.type==="date"?i.value(m.value,t.value.dateFormat,f.value):r.type==="datetime"?i.value(m.value,t.value.dateTimeFormat,f.value):V(m.value,o.value,{addSuffix:!0,locale:l.value.locale}))}},render(){return this.text?k(this.renderedTime):q("time",[this.renderedTime])}});export{W as N};

import{u as k,t as m,N as x}from"./useLanguage.253ae023.js";import{a as q,H as p,I as V,d1 as O,C as v,h as a,d2 as d}from"./entry.965cbfb6.js";import{u as R}from"./composables.afeb471a.js";import{u as y}from"./fetch.eef88911.js";import"./RenderData.2b7cc39b.js";import{N as I,a as b}from"./Tabs.4b2c25b6.js";import{R as N}from"./RenderFields.dc20bf3f.js";import{e as D,f as T}from"./Trash.b33dcf75.js";import{N as w}from"./Upload.38b41102.js";import{N as H}from"./Scrollbar.bdc26b9c.js";import"./Space.f818dfb9.js";import"./index.32cff159.js";import"./format-length.ad42f3fa.js";import"./ColorPicker.1807d23f.js";import"./Time.9226a68e.js";import"./FileText.cd6a6f0c.js";import"./Icon.f74efb11.js";import"./Scrollbar.f1d32ba1.js";import"./use-is-composing.b2f0b09a.js";import"./text.4d5a7e92.js";import"./use-houdini.66c23f06.js";import"./Image.503ecb01.js";import"./RenderSchema.0fe72e56.js";import"./index.d4f86f82.js";import"./vue.runtime.esm-bundler.7083aaa5.js";import"./RichEditor.cdf03c68.js";import"./Upload.0a12a685.js";import"./Add.59e5c432.js";import"./throttle.20c33391.js";const ve=q({async setup(){var h;k({ar:{signin:"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",signup:"\u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628"},en:{signin:"Sign in",signup:"Sign up"}});const i=p("Loading",()=>({}));i.value.Signin=!1,i.value.Signup=!1;const C=V(),s=D(),r=p("database"),l=O("User"),c=p("User"),f=v(null),n=v({username:"",password:""}),S=v(),o=p(()=>({}),"$0PFgXwZ7NW"),F=[{name:"Username",type:"text",required:!0},{name:"Password",type:"password",required:!0}],P=(h=r.value.tables.find(t=>t.slug==="user"))!=null&&h.schema?r.value.tables.find(t=>t.slug==="user").schema:[{name:"Username",type:"text",required:!0},{name:"Email",type:"email",required:!0},{name:"Password",type:"password",required:!0}],U=async t=>{var u;t.preventDefault(),(u=S.value)==null||u.validate(async g=>{if(g)s.error("The inputs are Invalid");else if(i.value.Signup!==!0)if(i.value.Signup=!0,l.value&&l.value.subscriptionID){const{data:e}=await y(`https://api.inicontent.com/${r.value.slug}/auth/signup`,{method:"POST",body:o.value,initialCache:!1},"$SeJO7CXk4v");e.value.result&&e.value.result.id?(l.value=n.value,c.value=e.value.result,s.success(e.value.message.en),d(`/${r.value.slug}`)):s.error(e.value.message.en),i.value.Signup=!1}else s.error("Please pick a plan first"),d("/")})},$=async t=>{var u;t.preventDefault(),(u=f.value)==null||u.validate(async g=>{if(g)s.error("The inputs are Invalid");else if(i.value.Signin!==!0){i.value.Signin=!0;const{data:e}=await y(`https://api.inicontent.com/${r.value.slug}/auth/login`,{method:"POST",body:n.value,initialCache:!1},"$3uPyOXVzO8");e.value.result&&e.value.result.id?(l.value=n.value,c.value=e.value.result,s.success(e.value.message.en),d(`/${r.value.slug}`)):s.error(e.value.message.en),i.value.Signin=!1}})};return R({title:`${r.value.name} | Authentication`,link:[{rel:"icon",href:r.value.icon}]}),()=>a(x,{hoverable:!0,style:{maxWidth:"300px"}},()=>{var t;return a(I,{defaultValue:(t=C.query.tab)!=null?t:"signin",size:"large",animated:!0},()=>[a(b,{name:"signin",tab:m("signin")},()=>[a(T,{ref:f,model:n.value,onSubmit:$},()=>[a(N,{modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,schema:F}),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signin},()=>m("signin"))])]),a(b,{name:"signup",tab:m("signup")},()=>[a(T,{ref:S,model:o.value,onSubmit:U},()=>[a(H,{style:{maxHeight:"320px"}},()=>a(N,{modelValue:o.value,"onUpdate:modelValue":u=>o.value=u,schema:P})),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signup},()=>m("signup"))])])])})}});export{ve as default};

import{u as k,t as m,N as q}from"./useLanguage.d2d2312d.js";import{a as P,H as p,C as g,d1 as V,h as a,d2 as v}from"./entry.328b861b.js";import{u as I}from"./composables.618862be.js";import{u as b}from"./fetch.7103049b.js";import"./RenderData.1a6bae2b.js";import{R as y}from"./RenderFields.4cf147db.js";import{e as R,f as N}from"./Trash.f7f2ca5d.js";import{N as $,a as T}from"./Tabs.34e108e5.js";import{N as w}from"./Upload.0169452e.js";import{N as D}from"./Scrollbar.ab988cec.js";import"./Space.59a4ec5d.js";import"./index.ad61f358.js";import"./format-length.ad42f3fa.js";import"./ColorPicker.73c99446.js";import"./Time.07060ce1.js";import"./FileText.6114aa05.js";import"./Icon.29c3922e.js";import"./Scrollbar.0c5a84d0.js";import"./use-is-composing.b03ea0d7.js";import"./text.28dac007.js";import"./use-houdini.a45afe2f.js";import"./Image.ee9b4ccc.js";import"./RenderSchema.758665a5.js";import"./index.d4f86f82.js";import"./vue.runtime.esm-bundler.6b4d84ea.js";import"./RichEditor.e82d76d5.js";import"./Upload.c25d53d7.js";import"./Add.216a72f9.js";import"./throttle.37ad0e3c.js";const pe=P({async setup(){var h;k({ar:{signin:"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",signup:"\u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628"},en:{signin:"Sign in",signup:"Sign up"}});const i=p("Loading",()=>({}));i.value.Signin=!1,i.value.Signup=!1;const c=g(null),s=R(),n=p("database"),o=V("User"),f=p("User"),l=p(()=>({}),"$3gr4icAB5v"),S=g(),u=g({username:"",password:""}),C=[{name:"Username",type:"text",required:!0},{name:"Password",type:"password",required:!0}],U=(h=n.value.tables.find(t=>t.slug==="user"))!=null&&h.schema?n.value.tables.find(t=>t.slug==="user").schema:[{name:"Username",type:"text",required:!0},{name:"Email",type:"email",required:!0},{name:"Password",type:"password",required:!0}],x=async t=>{var r;t.preventDefault(),(r=S.value)==null||r.validate(async d=>{if(d)s.error("The inputs are Invalid");else if(i.value.Signup!==!0)if(i.value.Signup=!0,o.value&&o.value.subscriptionID){const{data:e}=await b("https://api.inicontent.com/inicontent/auth/signup",{method:"POST",body:l.value,initialCache:!1},"$7Q88IpG4ed");e.value.result&&e.value.result.id?(o.value=u.value,f.value=e.value.result,s.success(e.value.message.en),v("/dashboard")):s.error(e.value.message.en),i.value.Signup=!1}else s.error("Please pick a plan first"),v("/")})},F=async t=>{var r;t.preventDefault(),(r=c.value)==null||r.validate(async d=>{if(d)s.error("The inputs are Invalid");else if(i.value.Signin!==!0){i.value.Signin=!0;const{data:e}=await b("https://api.inicontent.com/inicontent/auth/login",{method:"POST",body:u.value,initialCache:!1},"$X9f6lwMJCj");e.value.result&&e.value.result.id?(o.value=u.value,f.value=e.value.result,s.success(e.value.message.en),v("/dashboard")):s.error(e.value.message.en),i.value.Signin=!1}})};return I({title:`${n.value.name} | Authentication`,link:[{rel:"icon",href:n.value.icon}]}),()=>a(q,{hoverable:!0,style:{maxWidth:"300px"}},()=>{var t;return a($,{defaultValue:(t=route.query.tab)!=null?t:"signin",size:"large",animated:!0},()=>[a(T,{name:"signin",tab:m("signin")},()=>[a(N,{ref:c,model:u.value,onSubmit:F},()=>[a(y,{modelValue:u.value,"onUpdate:modelValue":r=>u.value=r,schema:C}),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signin},()=>m("signin"))])]),a(T,{name:"signup",tab:m("signup")},()=>[a(N,{ref:S,model:l.value,onSubmit:x},()=>[a(D,{style:{maxHeight:"320px"}},()=>a(y,{modelValue:l.value,"onUpdate:modelValue":r=>l.value=r,schema:U})),a(w,{attrType:"submit",type:"primary",block:!0,secondary:!0,strong:!0,loading:i.value.Signup},()=>m("signup"))])])])})}});export{pe as default};
